{"openapi":"3.0.3","info":{"title":"เอกสาร API สำหรับ Backend","description":"เอกสาร API สำหรับบริการส่วนหลังบ้านของระบบ","version":"1.0.0"},"components":{"schemas":{}},"paths":{"/api/login":{"post":{"summary":"ยืนยันตัวตนผู้ใช้และรับ JWT token","tags":["Authentication"],"description":"ยืนยันตัวตนผู้ใช้และส่งคืน JWT token พร้อมรายละเอียดผู้ใช้","requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["customerCode","password"],"properties":{"customerCode":{"type":"string","description":"รหัสลูกค้า"},"password":{"type":"string","description":"รหัสผ่าน"}}}}},"required":true},"responses":{"200":{"description":"Default Response"}}}},"/api/admin/users":{"post":{"summary":"Create a new user","tags":["Admin - Users"],"description":"Allows an admin to create a new user (customer or other roles).","requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["firstName","lastName","email","phone","customerCode","address","password"],"properties":{"firstName":{"type":"string","description":"ชื่อจริง"},"lastName":{"type":"string","description":"นามสกุล"},"email":{"type":"string","format":"email","description":"อีเมล"},"phone":{"type":"string","description":"หมายเลขโทรศัพท์"},"customerCode":{"type":"string","minLength":4,"maxLength":10,"description":"รหัสลูกค้า (4-10 ตัวอักษร)"},"address":{"type":"string","description":"ที่อยู่"},"password":{"type":"string","minLength":8,"description":"รหัสผ่าน (อย่างน้อย 8 ตัวอักษร)"},"role":{"type":"string","enum":["admin","customer"],"default":"customer","description":"บทบาทผู้ใช้. ค่าเริ่มต้นคือ customer. ค่าที่เป็นไปได้: admin, customer"}}}}},"required":true},"responses":{"201":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","description":"รหัสผู้ใช้"},"firstName":{"type":"string","description":"ชื่อจริง"},"lastName":{"type":"string","description":"นามสกุล"},"email":{"type":"string","format":"email","description":"อีเมล"},"phone":{"type":"string","description":"หมายเลขโทรศัพท์"},"customerCode":{"type":"string","description":"รหัสลูกค้า"},"address":{"type":"string","description":"ที่อยู่"},"role":{"type":"string","enum":["admin","customer"],"description":"บทบาทผู้ใช้. ค่าที่เป็นไปได้: admin, customer"},"createdAt":{"type":"string","format":"date-time","description":"สร้างเมื่อ"},"updatedAt":{"type":"string","format":"date-time","description":"อัปเดตล่าสุดเมื่อ"}}}}}}}},"get":{"summary":"Get all users","tags":["Admin - Users"],"description":"Retrieves a list of all users.","responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","description":"รหัสผู้ใช้"},"firstName":{"type":"string","description":"ชื่อจริง"},"lastName":{"type":"string","description":"นามสกุล"},"email":{"type":"string","format":"email","description":"อีเมล"},"phone":{"type":"string","description":"หมายเลขโทรศัพท์"},"customerCode":{"type":"string","description":"รหัสลูกค้า"},"address":{"type":"string","description":"ที่อยู่"},"role":{"type":"string","enum":["admin","customer"],"description":"บทบาทผู้ใช้. ค่าที่เป็นไปได้: admin, customer"},"createdAt":{"type":"string","format":"date-time","description":"สร้างเมื่อ"},"updatedAt":{"type":"string","format":"date-time","description":"อัปเดตล่าสุดเมื่อ"}}}}}}}}}},"/api/admin/users/{id}":{"get":{"summary":"Get user by ID","tags":["Admin - Users"],"description":"Retrieves a specific user by their ID.","parameters":[{"schema":{"type":"string"},"in":"path","name":"id","required":true,"description":"รหัสผู้ใช้"}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","description":"รหัสผู้ใช้"},"firstName":{"type":"string","description":"ชื่อจริง"},"lastName":{"type":"string","description":"นามสกุล"},"email":{"type":"string","format":"email","description":"อีเมล"},"phone":{"type":"string","description":"หมายเลขโทรศัพท์"},"customerCode":{"type":"string","description":"รหัสลูกค้า"},"address":{"type":"string","description":"ที่อยู่"},"role":{"type":"string","enum":["admin","customer"],"description":"บทบาทผู้ใช้. ค่าที่เป็นไปได้: admin, customer"},"createdAt":{"type":"string","format":"date-time","description":"สร้างเมื่อ"},"updatedAt":{"type":"string","format":"date-time","description":"อัปเดตล่าสุดเมื่อ"}}}}}}}}},"/api/parcels/parcel":{"get":{"summary":"รายการพัสดุ (พร้อมตัวกรองและการแบ่งหน้า)","tags":["การจัดการพัสดุ"],"parameters":[{"schema":{"type":"integer","minimum":1,"default":1},"in":"query","name":"page","required":false,"description":"หมายเลขหน้าสำหรับการแบ่งหน้า"},{"schema":{"type":"integer","minimum":1,"maximum":100,"default":10},"in":"query","name":"pageSize","required":false,"description":"จำนวนรายการต่อหน้า"},{"schema":{"type":"string","enum":["pending","shipped","delivered","cancelled","all"]},"in":"query","name":"status","required":false,"description":"กรองพัสดุตามสถานะ ('all' เพื่อดึงทุกสถานะ)"},{"schema":{"type":"string","enum":["unpaid","paid","partial","all"]},"in":"query","name":"paymentStatus","required":false,"description":"กรองพัสดุตามสถานะการชำระเงิน ('all' เพื่อดึงทุกสถานะ)"},{"schema":{"type":"string"},"in":"query","name":"trackingNo","required":false,"description":"กรองพัสดุตามหมายเลขติดตาม"},{"schema":{"type":"string","format":"date"},"in":"query","name":"dateFrom","required":false,"description":"กรองพัสดุที่สร้างตั้งแต่วันที่นี้ (YYYY-MM-DD)"},{"schema":{"type":"string","format":"date"},"in":"query","name":"dateTo","required":false,"description":"กรองพัสดุที่สร้างถึงวันที่นี้ (YYYY-MM-DD)"},{"schema":{"type":"string"},"in":"query","name":"customerCode","required":false,"description":"กรองพัสดุตามรหัสลูกค้า"}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"resultCode":{"type":"integer","description":"รหัสผลลัพธ์มาตรฐาน"},"resultStatus":{"type":"string","description":"ข้อความสถานะผลลัพธ์มาตรฐาน"},"developerMessage":{"type":"string","description":"ข้อความสำหรับนักพัฒนาหรือรายละเอียดข้อผิดพลาด"},"resultData":{"type":"object","properties":{"parcels":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid","description":"รหัสเฉพาะของพัสดุ (UUID)"},"parcelRef":{"type":"string","description":"หมายเลขอ้างอิงพัสดุ"},"receiveDate":{"type":"string","format":"date-time","description":"วันที่และเวลารับพัสดุ"},"customerCode":{"type":"string","description":"รหัสลูกค้าที่เกี่ยวข้อง"},"shipment":{"type":"string","description":"รายละเอียดการจัดส่งหรือตัวระบุ"},"estimate":{"type":"number","description":"ค่าประมาณหรือมูลค่า"},"status":{"type":"string","enum":["pending","shipped","delivered","cancelled"],"description":"สถานะปัจจุบันของพัสดุ"},"cnTracking":{"type":"string","description":"หมายเลขติดตามของจีน"},"volume":{"type":"number","description":"ปริมาตรของพัสดุ (เช่น ลูกบาศก์เมตร)"},"weight":{"type":"number","description":"น้ำหนักของพัสดุ (เช่น กิโลกรัม)"},"freight":{"type":"number","description":"ค่าขนส่ง"},"deliveryMethod":{"type":"string","description":"วิธีการจัดส่ง"},"thTracking":{"type":"string","description":"หมายเลขติดตามของไทย"},"paymentStatus":{"type":"string","enum":["unpaid","paid","partial"],"description":"สถานะการชำระเงินของพัสดุ"},"createdAt":{"type":"string","format":"date-time","description":"เวลาที่สร้างข้อมูลพัสดุ"},"updatedAt":{"type":"string","format":"date-time","description":"เวลาที่อัปเดตข้อมูลพัสดุล่าสุด"}},"required":["id","parcelRef","receiveDate","customerCode","shipment","estimate","status","cnTracking","volume","weight","freight","deliveryMethod","paymentStatus","createdAt","updatedAt"]},"description":"รายการอ็อบเจ็กต์พัสดุ"},"total":{"type":"integer","description":"จำนวนพัสดุทั้งหมดที่ตรงกับเงื่อนไข"},"page":{"type":"integer","description":"หมายเลขหน้าปัจจุบัน"},"pageSize":{"type":"integer","description":"จำนวนรายการต่อหน้า"}},"required":["parcels","total","page","pageSize"]}},"required":["resultCode","resultStatus","developerMessage","resultData"]}}}}}}},"/api/parcels/parcel/{id}":{"get":{"summary":"ดูข้อมูลพัสดุตาม ID","tags":["การจัดการพัสดุ"],"parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"id","required":true,"description":"รหัสเฉพาะของพัสดุที่ต้องการดึงข้อมูล (UUID)"}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"resultCode":{"type":"integer","description":"รหัสผลลัพธ์มาตรฐาน"},"resultStatus":{"type":"string","description":"ข้อความสถานะผลลัพธ์มาตรฐาน"},"developerMessage":{"type":"string","description":"ข้อความสำหรับนักพัฒนาหรือรายละเอียดข้อผิดพลาด"},"resultData":{"type":"object","properties":{"id":{"type":"string","format":"uuid","description":"รหัสเฉพาะของพัสดุ (UUID)"},"parcelRef":{"type":"string","description":"หมายเลขอ้างอิงพัสดุ"},"receiveDate":{"type":"string","format":"date-time","description":"วันที่และเวลารับพัสดุ"},"customerCode":{"type":"string","description":"รหัสลูกค้าที่เกี่ยวข้อง"},"shipment":{"type":"string","description":"รายละเอียดการจัดส่งหรือตัวระบุ"},"estimate":{"type":"number","description":"ค่าประมาณหรือมูลค่า"},"status":{"type":"string","enum":["pending","shipped","delivered","cancelled"],"description":"สถานะปัจจุบันของพัสดุ"},"cnTracking":{"type":"string","description":"หมายเลขติดตามของจีน"},"volume":{"type":"number","description":"ปริมาตรของพัสดุ (เช่น ลูกบาศก์เมตร)"},"weight":{"type":"number","description":"น้ำหนักของพัสดุ (เช่น กิโลกรัม)"},"freight":{"type":"number","description":"ค่าขนส่ง"},"deliveryMethod":{"type":"string","description":"วิธีการจัดส่ง"},"thTracking":{"type":"string","description":"หมายเลขติดตามของไทย"},"paymentStatus":{"type":"string","enum":["unpaid","paid","partial"],"description":"สถานะการชำระเงินของพัสดุ"},"createdAt":{"type":"string","format":"date-time","description":"เวลาที่สร้างข้อมูลพัสดุ"},"updatedAt":{"type":"string","format":"date-time","description":"เวลาที่อัปเดตข้อมูลพัสดุล่าสุด"}},"required":["id","parcelRef","receiveDate","customerCode","shipment","estimate","status","cnTracking","volume","weight","freight","deliveryMethod","paymentStatus","createdAt","updatedAt"]}},"required":["resultCode","resultStatus","developerMessage","resultData"]}}}}}}},"/api/parcels/admin/parcel/{id}/status":{"patch":{"summary":"อัปเดตสถานะพัสดุ","tags":["การจัดการพัสดุ (Admin)"],"description":"อนุญาตให้อัปเดตสถานะของพัสดุ สามารถเลือกส่งการแจ้งเตือนได้","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["pending","shipped","delivered","cancelled"],"description":"สถานะใหม่สำหรับพัสดุ"},"notify":{"type":"boolean","default":false,"description":"แจ้งเตือนลูกค้าเกี่ยวกับการอัปเดตสถานะหรือไม่ (ค่าเริ่มต้นคือ false)"}},"required":["status"]}}},"required":true},"parameters":[{"schema":{"type":"string","format":"uuid"},"in":"path","name":"id","required":true,"description":"รหัสเฉพาะของพัสดุที่ต้องการอัปเดต (UUID)"}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"resultCode":{"type":"integer","description":"รหัสผลลัพธ์มาตรฐาน"},"resultStatus":{"type":"string","description":"ข้อความสถานะผลลัพธ์มาตรฐาน"},"developerMessage":{"type":"string","description":"ข้อความสำหรับนักพัฒนาหรือรายละเอียดข้อผิดพลาด"},"resultData":{"type":"object","properties":{"id":{"type":"string","format":"uuid","description":"รหัสเฉพาะของพัสดุ (UUID)"},"parcelRef":{"type":"string","description":"หมายเลขอ้างอิงพัสดุ"},"receiveDate":{"type":"string","format":"date-time","description":"วันที่และเวลารับพัสดุ"},"customerCode":{"type":"string","description":"รหัสลูกค้าที่เกี่ยวข้อง"},"shipment":{"type":"string","description":"รายละเอียดการจัดส่งหรือตัวระบุ"},"estimate":{"type":"number","description":"ค่าประมาณหรือมูลค่า"},"status":{"type":"string","enum":["pending","shipped","delivered","cancelled"],"description":"สถานะปัจจุบันของพัสดุ"},"cnTracking":{"type":"string","description":"หมายเลขติดตามของจีน"},"volume":{"type":"number","description":"ปริมาตรของพัสดุ (เช่น ลูกบาศก์เมตร)"},"weight":{"type":"number","description":"น้ำหนักของพัสดุ (เช่น กิโลกรัม)"},"freight":{"type":"number","description":"ค่าขนส่ง"},"deliveryMethod":{"type":"string","description":"วิธีการจัดส่ง"},"thTracking":{"type":"string","description":"หมายเลขติดตามของไทย"},"paymentStatus":{"type":"string","enum":["unpaid","paid","partial"],"description":"สถานะการชำระเงินของพัสดุ"},"createdAt":{"type":"string","format":"date-time","description":"เวลาที่สร้างข้อมูลพัสดุ"},"updatedAt":{"type":"string","format":"date-time","description":"เวลาที่อัปเดตข้อมูลพัสดุล่าสุด"}},"required":["id","parcelRef","receiveDate","customerCode","shipment","estimate","status","cnTracking","volume","weight","freight","deliveryMethod","paymentStatus","createdAt","updatedAt"]}},"required":["resultCode","resultStatus","developerMessage","resultData"]}}}}}}}}}